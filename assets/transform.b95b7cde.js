var x=Object.defineProperty;var f=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var s=(e,t,r)=>(f(e,typeof t!="symbol"?t+"":t,r),r);import{m as n,r as o}from"./matrix.eb4bdb6d.js";class W{constructor(t){s(this,"el");s(this,"ctx");s(this,"width");s(this,"height");s(this,"degree_y");const r=t.clientWidth,i=t.clientWidth;t.width=r,t.height=i,this.el=t,this.ctx=t.getContext("2d"),this.width=r,this.height=i,this.degree_y=0}mirror_coordinate(){this.el.style.transformOrigin="center",this.el.style.transform="scale(1,-1)"}translate_origin(t){typeof t=="string"?(t=g(t,this),u(t,this.ctx)):u(t,this.ctx)}draw_point(t,r=1){this.ctx.beginPath(),this.ctx.fillStyle="#000",this.ctx.arc(t[0],t[1],r,0,2*Math.PI),this.ctx.fill(),this.ctx.closePath()}draw_line(t,r){this.ctx.beginPath(),this.ctx.moveTo(t[0],t[1]),this.ctx.lineTo(r[0],r[1]),this.ctx.stroke(),this.ctx.closePath()}draw_vector_order(t){for(let r=0;r<t.length;r++){const i=(r+1)%t.length;this.draw_line(t[r],t[i])}}draw_x(){this.draw_line(h(-this.width/2,0),h(this.width/2,0))}draw_z(){this.draw_line(h(0,-this.height/2),h(0,this.height/2))}draw_y(t){const r=t&&(this.degree_y=-t)&&this.degree_y||this.degree_y;let i,a;d(r)?(i=this.width/2,a=this.width/2*Math.tan(r/180*Math.PI)):(a=this.height/2,i=this.height/2/Math.tan(r/180*Math.PI)),this.draw_line(h(-i,-a),h(i,a))}clear_ctx(){this.ctx.clearRect(-this.width,-this.height,this.width*2,this.height*2)}}function l(e,t){return e=e%360,Math.abs(Math.abs(e)-t)}function d(e){return l(e,0)<=45||l(e,180)<=45}function h(e,t){return[e,t]}function g(e,t){const r=t.el.width,i=t.el.height;switch(e){case"center":return{x:r/2,y:i/2};default:return{x:0,y:0}}}function u(e,t){t.translate(e.x,e.y)}function _(e){return[[e[0],0],[0,e[1]]]}function m(e,t){let r;return t.length==2?r=n(_(e)):(r=[],console.error("don't support matrix 3 x 3 now")),o(t,r)}function k(e,t){return t.map(r=>m(e,r))}function w(e){return[[Math.cos(e),Math.sin(e)],[-Math.sin(e),Math.cos(e)]]}function M(e,t){let r;return e=c(e),t.length==2?r=n(w(e)):(r=[],console.error("don't support matrix 3 x 3")),o(t,r)}function O(e,t){return t.map(r=>M(e,r))}function p(e){return[[1,0],[Math.tan(c(e)),1]]}function y(e){return[[1,Math.tan(c(e))],[0,1]]}function D(e,t){const[r,i]=e;return b(i,P(r,t))}function P(e,t){const r=n(p(e));return o(t,r)}function b(e,t){const r=n(y(e));return o(t,r)}function X(e,t){return t.map(r=>D(e,r))}const z=[[1,0],[0,-1]],I=[[-1,0],[0,1]];function S(e,t){let r;return t.length==2?e==1?r=n(z):e==-1?r=n(I):(r=[],console.error("don't get a available factor")):(r=[],console.error("don't support matrix 3 x 3")),o(t,r)}function Y(e,t){return t.map(r=>S(e,r))}function c(e){return e/180*Math.PI}function C(e){return e.map(t=>(t.push(1),t))}function R(e){return e.push(1),e}function T(e,t){const r=R(t),i=C([[1,0],[0,1]]);return i.push([...e,1]),o(r,n(i))}function j(e,t){return t.map(r=>T(e,r)).map(r=>r==null?void 0:r.slice(0,r.length-1))}export{W as D,X as a,j as b,c as d,Y as m,O as r,k as s};
